; PlatformIO Project Configuration File for RC TOOLBOX
; ESP32-S3 + ILI9341 TFT + XPT2046 Touch + LVGL 9.4.0

[platformio]
default_envs = esp32-s3-devkitc-1
src_dir = src
; default_envs = touch-calibration
; src_dir = touch_calibration

[env]
platform = espressif32
build_src_filter = +<*> +<../gui/>
framework = arduino
monitor_speed = 115200
lib_deps =
    bodmer/TFT_eSPI@^2.5.43
    https://github.com/PaulStoffregen/XPT2046_Touchscreen.git
    lvgl/lvgl@9.4.0
    adafruit/Adafruit NeoPixel@^1.12.0
    adafruit/Adafruit PN532@^1.3.1
    adafruit/Adafruit BusIO@^1.16.1
build_flags =
    ; --- TFT_eSPI configuration (no User_Setup.h needed) ---
    -D USER_SETUP_LOADED=1
    -I .
    -I include
    -D ILI9341_DRIVER=1
    -D TFT_WIDTH=240
    -D TFT_HEIGHT=320
    -D SCREEN_WIDTH=320                           ; Landscape mode
    -D SCREEN_HEIGHT=240
    ; --- SPI pins for ESP32-S3 (adjust to your wiring) ---
    -D TFT_MISO=13
    -D TFT_MOSI=11
    -D TFT_SCLK=12
    -D TFT_CS=10
    -D TFT_DC=8
    -D TFT_RST=9
    -D USE_HSPI_PORT=1                            ; Use HSPI (SPI3) for TFT on ESP32-S3
    ; --- Touch (XPT2046) ---
    -D TOUCH_CS=14
    -D TOUCH_IRQ=7
    -D TOUCH_XPT2046=1
    ; SD card
    -D SD_CS=4                                    ; SD card chip select pin
    ; --- NeoPixel RGB LED (built-in on ESP32-S3-DevKitC-1) ---
    -D NEOPIXEL_PIN=48
    -D NEOPIXEL_COUNT=1
    ; --- PN532 NFC (I2C) ---
    ; -D PN532_I2C_ADDRESS=0x28                     ; HW-147C uses 0x28 instead of standard 0x24
    ; -D PN532_I2C_ADDRESS=0x24                     ; Elechouse V3 uses 0x24
    ; --- Display options ---
    -D LOAD_GLCD=1
    -D SMOOTH_FONT=1
    -D SPI_FREQUENCY=40000000

; --- ESP32-S3 DevKitC-1 ---
[env:esp32-s3-devkitc-1]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino
upload_speed = 921600

; --- Touch Calibration environment ---
[env:touch-calibration]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino
upload_speed = 921600
